<!DOCTYPE html>
<html>
<head>
  <title>chroma.js</title>
  <link rel="stylesheet" href="src/index.css">
</head>
<body>
<h1 id="chroma-js">chroma.js</h1>
<h2 id="quick-start">Quick start</h2>
<p><strong>chroma.js</strong> is a JavaScript library for dealing with colors!</p>
<p>chroma.js can <strong>read</strong> colors from various formats, <strong>manipulate</strong> them in different ways and finally <strong>output</strong> them in the format you want.</p>
<p>Here&#39;s an example for a simple read / manipulate / output chain:</p>
<pre><code class="lang-js">chroma(&#39;pink&#39;).darken(20).hex()
</code></pre>
<p>Aside from that, chroma.js can also help you <strong>generate nice colors</strong> using various methods, for instance to be used in color palette for maps or data visualizations.</p>
<pre><code class="lang-js">chroma.scale([&#39;white&#39;,&#39;green&#39;,&#39;blue&#39;]).colors(5)
</code></pre>
<p>chroma.js has a lot more to offer, but that&#39;s the basic gist of it.</p>
<h2 id="reading-colors-from-various-formats">Reading colors from various formats</h2>
<p>The first step is to get your color into chroma.js. That&#39;s what the generic constructor <code>chroma()</code> does. The function is trying to guess the color format for you. For instances, it will recognized any named color from the W3CX11 specification:   </p>
<pre><code class="lang-js">chroma(&#39;hotpink&#39;)
</code></pre>
<p>If there&#39;s no matching named color chroma.js checks for a <strong>hexadecimal string</strong>. It ignores case, the <code>#</code> sign is optional, and the shorter three letter format is recognized, too. So any of these are valid hexadecimal representations: <code>#ff3399</code>, <code>FF3399</code>, <code>#f39</code>, etc.</p>
<pre><code class="lang-js">chroma(&#39;#ff3399&#39;)
</code></pre>
<p>In addition to hex strings, <strong>hexadecimal numbers</strong> (in fact, just any number between 0 and 0xffffff), will be recognized, too.</p>
<pre><code class="lang-js">chroma(0xff3399)
</code></pre>
<p>If you pass three numbers chroma.js will assume they are red, green and blue values between <code>0</code> and <code>255</code>.</p>
<pre><code class="lang-js">chroma(255,51,153)
</code></pre>
<p>You can construct colors from different color spaces by passing the name of color space as the last argument. Here we define the same color in HSL by passing the <strong>h</strong>ue angle (0-360) and percentages for <strong>s</strong>aturation and <strong>l</strong>ightness:</p>
<pre><code class="lang-js">chroma(330, 1, 0.6, &#39;hsl&#39;)
</code></pre>
<p>Alternatively, every color space has it&#39;s own constructor function under the <code>chroma</code> namespace:</p>
<pre><code class="lang-js">chroma.hsl(330, 1, 0.6)
</code></pre>
<p>If you pass a string that does not look like a hexadecimal color, chroma.js will try to parse it as CSS-color, either as <code>rgb()</code>, <code>rgba()</code>, <code>hsl()</code>, or <code>hsla()</code>.</p>
<pre><code class="lang-js">chroma(&#39;rgb(255,51,153)&#39;)
</code></pre>
<pre><code class="lang-js">chroma(&#39;hsla(330,100%,60%,0.5)&#39;)
</code></pre>
<p>You can access the alpha channel using <code>alpha()</code>.</p>
<pre><code class="lang-js">chroma(&#39;hsla(330,100%,60%,0.5)&#39;).alpha()
</code></pre>
<h3 id="importing-from-more-color-spaces">Importing from more color spaces</h3>
<p>Additional to the generic color consuctor chroma.js provides . chroma.js can read colors in various different color spaces.</p>
<pre><code class="lang-js">chroma.hsl(60, 1, 0.5)
</code></pre>
<pre><code class="lang-js">chroma.hsv(60,1,0.5)
</code></pre>
<p>CMYK</p>
<pre><code class="lang-js">chroma.cmyk(1, 0, 0.5, 0.5)
</code></pre>
<pre><code class="lang-js">chroma.lab(0.5, 30, 60) // lightness,A*,B*
</code></pre>
<pre><code class="lang-js">chroma.hcl(60, 1, 0.6)  // hue,chroma,lightness
</code></pre>
<p>chroma.js generally accepts a variety to input APIs, mainly because I couldn&#39;t decide which one I like best. Use whatever you want.</p>
<pre><code class="lang-js">chroma.hsl(60, 1, 0.5);    // one argument per channel
chroma.hsl([60, 1, 0.5]);  // all channels as single array
chroma(60, 1, 0.5, &#39;hsl&#39;); // passing mode as last parameter
</code></pre>
<h2 id="manipulating-colors">manipulating colors</h2>
<p>Once loaded, chroma.js can change colors. One way we already saw above, you can change the lightness.</p>
<pre><code class="lang-js">chroma(&#39;hotpink&#39;)color.darken();      // make color darker
chroma(&#39;hotpink&#39;).darken(30);    // make color even darker
chroma(&#39;hotpink&#39;).brighten();    // make color brighter
</code></pre>
<p>You can also <strong>saturate</strong> colors. The default  is</p>
<pre><code class="lang-js">chroma(&#39;slategray&#39;).saturate(); 
chroma(&#39;slategray&#39;).saturate(1.2);
</code></pre>
<pre><code class="lang-js">chroma(&#39;hotpink&#39;).desaturate();
chroma(&#39;hotpink&#39;).desaturate(1.2);
</code></pre>
<p>Or you can mix a color with another color:</p>
<pre><code class="lang-js">chroma(&#39;blue&#39;).mix(&#39;red&#39;).hex()
</code></pre>
<p>If you want to ensure a color has a certain</p>
<pre><code class="lang-js">chroma(&#39;hotpink&#39;).luminance(0.2)
</code></pre>
<h2 id="mixing-two-colors">Mixing two colors</h2>
<p>Mix two colors can be achieved in multiple ways.</p>
<pre><code class="lang-js">chroma.mix(&#39;red&#39;, &#39;blue&#39;).hex()
</code></pre>
<p>Change the mix ratio by passing a value between 0 and 1 as third parameter. In the following example, red will be mixed with blue. </p>
<pre><code class="lang-js">chroma.mix(&#39;red&#39;, &#39;blue&#39;, 0.25).hex()
</code></pre>
<p>The color mixing produces different results based on what color space the colors are interpolated in. The default color space is <code>rgb</code> but in the following example we interpolate in <code>Lab</code> instead.  </p>
<pre><code class="lang-js">chroma.mix(&#39;red&#39;, &#39;blue&#39;, 0.25, &#39;lab&#39;)
</code></pre>
<h2 id="darken-brighten-colors">darken/brighten colors</h2>
<pre><code class="lang-js">chroma(&#39;red&#39;).darken().hex() //
chroma(&#39;red&#39;).brighten().hex() //
</code></pre>
<h2 id="blending-colors">blending colors</h2>
<pre><code class="lang-js">chroma.blend(&#39;red&#39;, &#39;pink&#39;, &#39;multiply&#39;)
</code></pre>
<pre><code class="lang-js">chroma.blend.multiply(&#39;red&#39;, &#39;pink&#39;)
</code></pre>
<h2 id="color-output">color output</h2>
<p>Finally, chroma.js allows you to output colors in various color spaces and formats. Most often you will want to output the color as hexadecimal string.</p>
<pre><code class="lang-js">chroma(&#39;orange&#39;).hex()
</code></pre>
<p><strong><code>name</code></strong> returns the named color or the hexadecimal string, if the color isn&#39;t present.</p>
<pre><code class="lang-js">chroma(&#39;#ffa500&#39;).name()
</code></pre>
<p><strong><code>rgb</code></strong> returns an array with the <strong>r</strong>ed, <strong>b</strong>lue, and <strong>g</strong>reen component, each as number between 0 and 255.</p>
<pre><code class="lang-js">chroma(&#39;orange&#39;).rgb()
</code></pre>
<p><strong><code>hsl</code></strong> returns an array with the <strong>h</strong>ue, <strong>s</strong>aturation, and <strong>l</strong>ightness component, each as number between 0 and 255. Note that for hue-less colors (black, white, and grays), the hue component will be NaN.</p>
<pre><code class="lang-js">chroma(&#39;orange&#39;).hsl()
</code></pre>
<pre><code class="lang-js">chroma(&#39;white&#39;).hsl()
</code></pre>
<p><strong><code>hsv</code></strong> returns an array with the <strong>h</strong>ue, <strong>s</strong>aturation, and <strong>v</strong>alue component, each as number between 0 and 255. Note that for hue-less colors (black, white, and grays), the hue component will be NaN.</p>
<pre><code class="lang-js">chroma(&#39;orange&#39;).hsv()
</code></pre>
<p><strong><code>lab</code></strong> returns an array with the <strong>L</strong>, <strong>a</strong>, and <strong>b</strong> component, each as number between 0 and 255.</p>
<pre><code class="lang-js">chroma(&#39;orange&#39;).lab()
</code></pre>
<p><strong>luminance</strong> </p>
<pre><code class="lang-js">chroma(&#39;orange&#39;).luminance()
</code></pre>
<p><strong>temperature</strong> </p>
<pre><code class="lang-js">chroma(&#39;orange&#39;).temperature()
</code></pre>
<p>If the output color format is returned as separate channels, you can access them both using numeric and named indexes:</p>
<pre><code>color.rgb()[0]      // 255
color.rgb().r       // 255
color.rgb().red     // 255
</code></pre><p>For a complete list of supported output formats, read the <a href="">API docs</a>.</p>
<h2 id="supported-color-spaces-and-output-formats">Supported color spaces and output formats</h2>
<p>What follows is a complete list of all supported color spaces and formats.</p>
<p><strong>RGB</strong>: <strong>r</strong>ed, <strong>g</strong>reen, <strong>b</strong>lue, each between 0 and 255.</p>
<pre><code class="lang-js">chroma(200, 0, 30);
chroma.rgb(0.2, 0.8, 0, 0);
chroma(0.2, 0.8, 0, 0, &#39;rgb&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;lime&#39;).rgb()
</code></pre>
<p><strong>RGB (hex)</strong> Another way to input and output RGB colors is as <em>hexadecimal</em> strings:</p>
<pre><code class="lang-js">chroma(&#39;#EE5500&#39;);
chroma.hex(&#39;#EE5500&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;hotpink&#39;).hex()
</code></pre>
<p><strong>RGB (num)</strong> Another way to input and output RGB colors is as <em>hexadecimal</em> strings:</p>
<pre><code class="lang-js">chroma(0xEE5500);
chroma.num(0xEE5500);
</code></pre>
<pre><code class="lang-js">chroma(&#39;hotpink&#39;).num()
</code></pre>
<p><strong>CMYK</strong>: <strong>c</strong>yan, <strong>m</strong>agenta, <strong>y</strong>ellow, <strong>b</strong>lack, each between 0 and 1.</p>
<pre><code class="lang-js">chroma.cmyk(0.2, 0.8, 0, 0);
chroma(0.2, 0.8, 0, 0, &#39;cmyk&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;lime&#39;).cmyk()
</code></pre>
<p><strong>HSL</strong>: <strong>h</strong>ue (0-360), <strong>s</strong>aturation (0-1), <strong>l</strong>ightness (0-1).</p>
<pre><code class="lang-js">chroma.hsl(60, 0.8, 0.5);
chroma(60, 0.8, 0.5, &#39;hsl&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;tomato&#39;).hsl()
</code></pre>
<p><strong>HSV</strong>: <strong>h</strong>ue (0-360), <strong>s</strong>aturation (0-1), <strong>v</strong>alue (0-1).</p>
<pre><code class="lang-js">chroma.hsv(60, 0.8, 0.8);
chroma(60, 0.8, 0.8, &#39;hsv&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;tomato&#39;).hsv()
</code></pre>
<p><strong>HSI</strong>: <strong>h</strong>ue (0-360), <strong>s</strong>aturation (0-1), <strong>i</strong>ntensity (0-1).</p>
<pre><code class="lang-js">chroma.hsi(60, 0.8, 0.8);
chroma(60, 0.8, 0.8, &#39;hsi&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;tomato&#39;).hsi()
</code></pre>
<p><strong>Lab</strong>: <strong>L</strong>ightness (0-100), <strong>a</strong> (-100 - 100), <strong>b</strong> (-100 - 100).</p>
<pre><code class="lang-js">chroma.lab(80, 40, 130);
chroma(80, 40, 130, &#39;lab&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;cyan&#39;).lab()
</code></pre>
<p><strong>Lch</strong>: <strong>L</strong>ightness, <strong>c</strong>hroma (0-1), <strong>h</strong>ue (0-1).</p>
<pre><code class="lang-js">chroma.lch(80, 40, 130);
chroma(80, 40, 130, &#39;lch&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;tomato&#39;).lch()
</code></pre>
<p><strong>HCL</strong>: Btw, if you prefer, you can use <strong>hcl</strong> instead of Lch, too. It is all the same, except that lightness and hue channels are switched to be more consistent with HSL.</p>
<pre><code class="lang-js">chroma.hcl(130, 40, 80);
chroma(130, 40, 80, &#39;hcl&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;tomato&#39;).hcl()
</code></pre>
<p><strong>CSS</strong></p>
<p><strong>GL</strong> is a variant of RGB, with the only difference that the r,g,b components are normalized to the range of 0-1.</p>
<pre><code class="lang-js">chroma.gl(0.2, 0.8, 0);
chroma(0.2, 0.8, 0, &#39;gl&#39;);
</code></pre>
<pre><code class="lang-js">chroma(&#39;33cc00&#39;).gl();
</code></pre>
<p>sdsd</p>

<link rel="stylesheet" type="text/css" href="vendor/codemirror/lib/codemirror.css"> 
<script type="text/javascript" src="vendor/jquery/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="vendor/chroma-js/chroma.min.js"></script>
<script type="text/javascript" src="vendor/codemirror/lib/codemirror.js"></script>
<script type="text/javascript" src="vendor/codemirror/mode/javascript/javascript.js"></script>

<script type="text/javascript">
    
    $('code.lang-js').each(function() {
        
        var code = this;
        
        var cm = CodeMirror(function(elt) {
            code.parentNode.replaceChild(elt, code);
            }, {
                value: code.innerHTML.trim(),
                indentUnit: 4,
                mode: 'javascript'
            });

        cm.on('update', function(_cm, change) {
            showColors(_cm);
        });

        var resDisplay = $('<div class="result-display" />')
            .appendTo(cm.display.wrapper.parentNode);

        showColors(cm);

        function showColors(cm) {
            $('.cm-string', cm.display.wrapper).each(styleSpan);
            $('.cm-number', cm.display.wrapper).each(enableSlider);

            // evaluate script
            var src = cm.getDoc().getValue();
            //resDisplay.html('');
            try {

                var s = src.split(';').map(eval);
                resDisplay.html(s.map(resRec)
                    .filter(function(d) { return d !== undefined; })
                    .join(','));

                $('.cm-string', resDisplay).each(styleSpan);

            } catch (e) {
                // console.warn(e);
            }

            function resRec(d) {
                if ($.isArray(d)) {
                    return '['+d.map(d.length > 2 ? resShort : resLong).join(',')+']';
                }
                return resLong(d);

                function resLong(d) {
                    if (typeof d == 'string') {
                        // string color, e.g. hex value
                        return '<span class="cm-string">"'+d+'"</span>';
                    } else if (typeof d == 'object' && d._rgb) {
                        // chroma.js object
                        return '<span class="cm-string cm-color" data-color="'+d.css()+'">'+d.hex()+'</span>';                 
                    } else if ($.isNumeric(d)) {
                        return '<span class="cm-number">'+round(d,3)+'</span>';
                    }
                }

                function resShort(d) {
                    if (typeof d == 'string') {
                        // string color, e.g. hex value
                        return '<span class="cm-string cm-color" data-color="'+d+'"></span>';
                    } else if (typeof d == 'object' && d._rgb) {
                        // chroma.js object
                        return '<span class="cm-string cm-color" data-color="'+d.css()+'"></span>';                 
                    } else if ($.isNumeric(d)) {
                        return '<span class="cm-number">'+round(d,2)+'</span>';
                    } else if (isNaN(d)) {
                        return '<span class="cm-number cm-nan">NaN</span>';
                    }
                }
                
                function round(d, p) {
                    var n = Math.pow(10, p);
                    return Math.round(d*n) / n;
                }
            }
        }

        function styleSpan() {
            var span = $(this);
            //setTimeout(function() {
                val = span.data('color') || span.html().replace(/['"]/g, '').trim();
                if (chroma[val]) {
                    span.attr('style', '');
                    return;
                }
                        
                try {
                    var col = chroma(val),
                        l = col.luminance();
                    span.attr('style', [
                        'background:'+col.hex(),
                        'color:'+(l <0.5 ? 'white' : 'black'),
                        'opacity:'+col.alpha()
                    ].join(';'));                    
                } catch (e) {
                    //console.log(e);
                    span.attr('style', '');
                    // not a color, so ignore
                }
            //}, 50);
        }

        function enableSlider() {
            return;
            var span = $(this),
                slider = $('<div></div>').addClass('slider'),
                input = $('<input type="range" />').appendTo(slider);
            
            span.off('mouseenter').on('mouseenter', function() {
                var v = +span.text(),
                    d = Math.pow(10, Math.max(1, Math.log10(v))),
                    min = v - d,
                    max = v + d;
                input.attr({ min: min, max: max })
                    .prop('value', v);
                console.log('span', v);

                span.append(slider);
            });
            span.off('mouseleave').on('mouseleave', function() {
                //slider.remove();
            });
        }

    });

    
</script>
</body>
<html>
