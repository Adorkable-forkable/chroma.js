!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):r.chroma=t()}(this,function(){"use strict";function r(r){return r.length>=3?[].slice.call(r):r[0]}function t(r){r._clipped=!1,r._unclipped=r.slice(0);for(var t=0;t<=3;t++)t<3?((r[t]<0||r[t]>255)&&(r._clipped=!0),r[t]<0&&(r[t]=0),r[t]>255&&(r[t]=255)):(r[t]<0&&(r[t]=0),r[t]<1&&(r[t]=1));return r._clipped||delete r._unclipped,r}function n(){for(var r=arguments.length,t=Array(r);r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(f,[null].concat(t)))}var e,o,i,u,l;for(e={},l="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),o=0,i=l.length;o<i;o++)u=l[o],e["[object "+u+"]"]=u.toLowerCase();var c=function(r){var t;return t=Object.prototype.toString.call(r),e[t]||"object"},a={},p=[],g=!1,f=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];this._rgb=null;var o=n[n.length-1];if(a[o])console.log("found mode",o),this._rgb=t(a[o](r(n.slice(0,-1))));else{g||(g=p.sort(function(r,t){return t.p-r.p}));for(var i=0,u=g;i<u.length;i+=1){var l=u[i];if(o=l.test.apply(l,n))break}o&&(this._rgb=t(a[o].apply(a,n)))}this._rgb||(console.warn("unknown format: "+n),this._rgb=[0,0,0]),3==this._rgb.length&&this._rgb.push(1)};return n._input=a,a.rgb=function(){return r(arguments)},n.rgb=function(){for(var r=arguments.length,t=Array(r);r--;)t[r]=arguments[r];return n.apply(void 0,t.concat(["rgb"]))},f.prototype.rgb=function(r){return void 0===r&&(r=!0),r?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},p.push({p:3,test:function(t){var n=r(arguments);return"array"==c(n)&&3==n.length?"rgb":"array"==c(n)&&4==n.length&&"number"==c(n[3])&&n[3]>=0&&n[3]<=1?"rgb":void 0}}),n});