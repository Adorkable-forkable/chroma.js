!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.chroma=r()}(this,function(){"use strict";function t(t){return t.length>=3?[].slice.call(t):t[0]}function r(t){t._clipped=!1,t._unclipped=t.slice(0);for(var r=0;r<=3;r++)r<3?((t[r]<0||t[r]>255)&&(t._clipped=!0),t[r]<0&&(t[r]=0),t[r]>255&&(t[r]=255)):(t[r]<0&&(t[r]=0),t[r]<1&&(t[r]=1));return t._clipped||delete t._unclipped,t}function n(){for(var t=arguments.length,r=Array(t);t--;)r[t]=arguments[t];return new(Function.prototype.bind.apply(g,[null].concat(r)))}var e,o,i,l,u;for(e={},u="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),o=0,i=u.length;o<i;o++)l=u[o],e["[object "+l+"]"]=l.toLowerCase();var c=function(t){var r;return r=Object.prototype.toString.call(t),e[r]||"object"},a={},p=[],s=!1,g=function(){this._rgb=null;var n=[].slice.call(arguments),e=n[n.length-1];if(a[e])console.log("found mode",e),this._rgb=r(a[e](t(n.slice(0,-1))));else{s||(s=p.sort(function(t,r){return r.p-t.p}));for(var o=0,i=s;o<i.length;o+=1){var l=i[o];if(e=l.test.apply(l,n))break}e&&(this._rgb=r(a[e].apply(a,n)))}this._rgb||(console.warn("unknown format: "+n),this._rgb=[0,0,0]),3==this._rgb.length&&this._rgb.push(1)};return n._input=a,a.rgb=function(){return t(arguments)},n.rgb=function(){for(var t=arguments.length,r=Array(t);t--;)r[t]=arguments[t];return n.apply(void 0,r.concat(["rgb"]))},g.prototype.rgb=function(t){return void 0===t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},p.push({p:3,test:function(r){var n=t(arguments);return"array"==c(n)&&3==n.length?"rgb":"array"==c(n)&&4==n.length&&"number"==c(n[3])&&n[3]>=0&&n[3]<=1?"rgb":void 0}}),n});